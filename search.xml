<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>SolidWorks 2020 破解教程</title>
      <link href="/posts/solidworks-crack/"/>
      <url>/posts/solidworks-crack/</url>
      
        <content type="html"><![CDATA[<p>话不多说，直接开始。下载并解压缩后我们会得到下面的文件(夹)</p><ul><li>SolidWorks.2020.SP3.0.Full.Premium.DVD.iso (主安装文件)</li><li>SW2020 SP2 fixed SPRs.7z</li><li>_SolidSQUAD_ (破解补丁)</li></ul><p>在_SolidSQUAD_目录下有一个英文版的readme.txt，我们就依照这里的步骤进行安装。</p><blockquote><p>If you already have SW2020 cracked by SSQ installed you can just update existing SW2020 to this one. No additional crack is needed So you can skip steps 1-5</p></blockquote><p>如果你已经安装过了被SSQ破解过的2020版，你可以仅仅升级到此版本并跳过1-5步。</p><h2 id="安装前准备"><a href="#安装前准备" class="headerlink" title="安装前准备"></a>安装前准备</h2><h3 id="断网并准备-NET环境"><a href="#断网并准备-NET环境" class="headerlink" title="断网并准备.NET环境"></a>断网并准备.NET环境</h3><blockquote><p>Before installation, block the outgoing Internet access by means of Windows Firewall or cord plug. Check .NET Framework 3.5 and 4.0 are installed. If .NET Framework 3.5 (including 2.0) is not installed, go to “Control Panel” -&gt; “Programs and Features” -&gt; “Turn Windows features on or off” -&gt; select “.NET Framework 3.5 (including 2.0)”</p></blockquote><p>大概意思就是安装前要断网，然后检查一下有没有安装.NET框架，如果没安装这个框架，去控制面板（从任务栏的搜索框里可以找到）-&gt; 程序和功能 -&gt; 启用或关闭Windows功能里面，把<code>.NET Framework 3.5（.NET 2.0 和 3.0）</code>这一项前面的复选框选中即可（不需要展开）。</p><p><img src="/images/solidworks-crack/dotnet.png"></p><h3 id="添加注册表"><a href="#添加注册表" class="headerlink" title="添加注册表"></a>添加注册表</h3><p>解压_SolidSQUAD_目录下的<em>SolidSQUAD</em>.7z,双击<code>sw2020_network_serials_licensing.reg</code>并点击确定，将该项添加到注册表。</p><h3 id="准备本地Server环境"><a href="#准备本地Server环境" class="headerlink" title="准备本地Server环境"></a>准备本地Server环境</h3><p>把SolidWorks_Flexnet_Server这个文件夹复制到C盘（其实复制到其他地方也行，只要以后不删掉），右键选择文件夹中的<code>server_install.bat</code>，点击<code>以管理员身份运行</code>。</p><p>出现<code>SolidWorks Flexnet Server 服务已经启动成功</code>即可关闭。</p><h2 id="开始安装"><a href="#开始安装" class="headerlink" title="开始安装"></a>开始安装</h2><p>解压<code>SolidWorks.2020.SP3.0.Full.Premium.DVD.iso</code>，打开setup.exe。(其实win10以上也可以直接双击点开，这样会加载成虚拟光驱)</p><p><img src="/images/solidworks-crack/install-1.png"></p><p>选择 <code>在此计算机上安装</code>，下一步，下一步。</p><p>当碰到下面的弹窗时，点击<code>取消</code>。</p><p><img src="/images/solidworks-crack/install-2.png"></p><p>自行更改安装位置。勾选<code>我接受 SOLIDWORKS 条款</code></p><p><img src="/images/solidworks-crack/install-3.png"></p><p>出现如下窗口，确保端口@服务器填的是<code>25734@localhost</code></p><p><img src="/images/solidworks-crack/install-4.png"></p><p>安装过程比较耗时间，建议先去吃顿饭或者开一局游戏。</p><p><img src="/images/solidworks-crack/install-5.png"></p><p>安装完成。</p><p><img src="/images/solidworks-crack/install-6.png"></p><h2 id="安装后"><a href="#安装后" class="headerlink" title="安装后"></a>安装后</h2><p>还没完呢，把_SolidSQUAD_\Program Files\SOLIDWORKS Corp下的所有文件，复制到你的安装目录。比如你安装在了D盘SolidWorks目录下，那么就把这些文件全部复制到该目录。</p><p><img src="/images/solidworks-crack/copy-files.png"></p><p>双击刚才_SolidSQUAD_目录下的<code>SolidSQUADLoaderEnabler.reg</code>，点击确定。</p><p>重启你的电脑。</p><p>打开SOLIDWORKS 2020，点击右上角的小问号，点击SolidNetWork License Manager，在弹出的窗口中点击许可顺序选项卡，然后把所有以Premium结尾的项目移动到最上方。点击应用，确定。</p><p><img src="/images/solidworks-crack/order.png"></p><p>破解完成，已经可以联网了。</p><p><img src="/images/solidworks-crack/products.png"></p><h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><p>大概分析了一下破解原理，相当于在本地搭建了一个Solidworks许可证的服务器，然后控制SolidWorks从本地的的许可服务器获取许可证。原理很巧妙，但也有不足的一点，本地的运行的服务需要一直挂在后台，虽然占用的内存不多，但确实有点鸡肋。</p><p><img src="/images/solidworks-crack/taskmgr.png"></p><p><img src="/images/solidworks-crack/taskmgr2.png"></p><p>话说回来，SolidWroks足足占用了我将近20G的空间，而且我甚至感觉开机都变慢了，我在考虑要不还是卸了算了…</p>]]></content>
      
      
      
        <tags>
            
            <tag> 教程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>一次腾讯云函数的适配开发</title>
      <link href="/posts/tencent-scf-dev/"/>
      <url>/posts/tencent-scf-dev/</url>
      
        <content type="html"><![CDATA[<p>好长时间没有更新博客了，正好前天做了一个自动打卡脚本在腾讯云函数上的适配，中间遇到了一些问题，于是写篇文章来记录一下。</p><h3 id="获取用户信息"><a href="#获取用户信息" class="headerlink" title="获取用户信息"></a>获取用户信息</h3><p>之前的脚本是在Github Actions上定时运行的，获取用户信息的方案是从项目的Secrets中读取。中间其实还有写入到命令行然后再从命令行中读取字符等过程，目的只是保护用户信息不泄露。</p><p>命令行：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">python3 main.py &lt;&lt;EOF</span><br><span class="line"><span class="meta">$</span><span class="bash">&#123;&#123;secrets.USERS&#125;&#125;</span></span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><p>读取：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:  </span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        users = input()</span><br><span class="line">        info = users.split(<span class="string">&#x27;,&#x27;</span>)</span><br><span class="line">        phone.append(info[<span class="number">0</span>])</span><br><span class="line">        password.append(info[<span class="number">1</span>])</span><br><span class="line">        sckey.append(info[<span class="number">2</span>])</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br></pre></td></tr></table></figure><p>对于腾讯云函数，我采用的方法是将SCKEY和用户的信息都放入环境变量，这样别人在使用脚本的时候就只需要添加环境变量即可，不用修改代码。</p><p>修改之后的读取操作：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:  </span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        user = os.environ.get(<span class="string">&#x27;user&#x27;</span> + str(i))</span><br><span class="line">        <span class="keyword">if</span> user <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        phone.append(user.split(<span class="string">&#x27;,&#x27;</span>)[<span class="number">0</span>])</span><br><span class="line">        password.append(user.split(<span class="string">&#x27;,&#x27;</span>)[<span class="number">1</span>])</span><br><span class="line">        i+=<span class="number">1</span></span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br></pre></td></tr></table></figure><h3 id="添加依赖"><a href="#添加依赖" class="headerlink" title="添加依赖"></a>添加依赖</h3><p>这是最麻烦的地方，腾讯云函数的运行环境并不是啥依赖都有，查询文档后得知没有的依赖需要和代码包一同打包上传。</p><blockquote><ol><li>在 requirements.txt 中配置依赖信息。</li><li>通过 pip install -r requirements.txt -t . 命令安装依赖包。</li><li>上传代码库时请将依赖库一同打包上传。</li></ol></blockquote><p>于是尝试把pycrytodome的Cryto模块打包直接上传，结果并不能运行。</p><p>查询文档:</p><blockquote><p>函数运行的系统是 CentOS 7，您需要在相同环境下进行安装。若环境不一致，则可能导致上传后运行时出现找不到依赖的错误。您可参考<a href="https://cloud.tencent.com/document/product/583/50826">云函数容器镜像</a>进行依赖安装。</p></blockquote><p>看了一下关于容器镜像的文档，好家伙还要用到Docker，但我之前连Docker是干啥的都不知道。。</p><p>没办法，硬着头皮下了一个Docker Desktop，升级了下wsl子系统环境（虽然并没有用到wsl2），让后用命令<code>docker pull ccr.ccs.tencentyun.com/scf-repo/runtime-python3:latest</code>拉取容器镜像，把项目文件夹挂载到镜像容器内，然后使用下面的命令安装依赖：</p><p><code>pip3 install pipreqs</code><br><code>pipreqs ./</code><br><code>pip install -r requirements.txt -t ./</code></p><p>其中pipreqs把urllib和requests这两个依赖也放进了requirements.txt，但腾讯云函数的运行环境已经有这两个依赖了，手动去掉即可。</p><p>安装完依赖后打包上传，部署并测试，终于能够正常运行了。</p>]]></content>
      
      
      
        <tags>
            
            <tag> 编程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>学校教务系统的漏洞分析</title>
      <link href="/posts/jiaowu-system-analysis/"/>
      <url>/posts/jiaowu-system-analysis/</url>
      
        <content type="html"><![CDATA[<h3 id="起因"><a href="#起因" class="headerlink" title="起因"></a>起因</h3><p>本来是想着用Python写一个抢课的脚本，没想到在研究教务系统的网页时发现了我们教务系统漏洞还挺多。</p><p>学校教务系统搭建在IIS上，这个方正教务系统用的是ASP .NET,系统版本还是2017年的，据我们学长说以前也被人搞过，但仍然很长一段时间都没有升级系统。</p><p><img src="/images/jiaowu-system-analysis/footer.png" alt="教务系统底部"></p><h3 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h3><p>这里我已经提前知道了我们选课的那个页面对应xsxk.aspx，但教务系统首页现在的导航栏你活动报名一栏没有开放学生选课的入口，于是我们尝试把地址栏中的xs_main.aspx改为xsxk.aspx。一开始服务器返回了302，页面显示：<code>Object moved to here</code>，没事我们直接点进去，然后会有一个alert弹出，直接忽略就能进去了。</p><p><img src="/images/jiaowu-system-analysis/alert.png"><br><img src="/images/jiaowu-system-analysis/xsxk.png"></p><p>点一下查看课表就可以把隐藏的按钮显示出来。</p><p><img src="/images/jiaowu-system-analysis/xsxk2.png"></p><p>点选修课程，然后会有一个窗口弹出，这里可能会被chrome拦截，点地址栏的允许弹出窗口就行了。</p><p><img src="/images/jiaowu-system-analysis/window.png"></p><p>随便选一个项目，然后点选定，这时主窗口的课程列表就会更新。</p><p><img src="/images/jiaowu-system-analysis/lesson-list.png"></p><p>随便点一个课程然后又会有一个弹出窗口，同时会有不允许选课的alert弹出。</p><p><img src="/images/jiaowu-system-analysis/alert2.png"></p><p>这时我们不要点确定，否则窗口就会被关闭。复制这个窗口地址栏的网址，新建一个标签页打开。弹出alert后就可以直接点确定，不出意外的话这个标签页应该不会被关闭。</p><p><img src="/images/jiaowu-system-analysis/xsxjs.png"></p><p>但是这个页面仍然不允许选课，没事，依照刚才的思路，一定是有东西被隐藏了。我们通过开发人员工具可以发现，关闭按钮前面还有两个button的样式都被设为了<code>DISPLAY:NONE</code>。</p><p><img src="/images/jiaowu-system-analysis/devtools.png"></p><p>把这两个button的DISPLAY属性都取消掉，关闭按钮前面就会出现两个空白的按钮。尝试点第一个按钮，就会弹出如下提示。</p><p><img src="/images/jiaowu-system-analysis/xsxjs2.png"></p><p>同时我们想要的选课界面就出来了。</p><p><img src="/images/jiaowu-system-analysis/xsxjs3.png"></p><p>选中单选框并选中不预定教材，然后点点选定按钮提交，就会用保存成功的提示。</p><p><img src="/images/jiaowu-system-analysis/save-succeed.png"></p><p>我们回到之前的页面查看我们的已选课程：</p><p><img src="/images/jiaowu-system-analysis/choosed-lesson.png"></p><p>已选课程里面已经有了我们刚才选的课。</p><h3 id="更大胆的想法"><a href="#更大胆的想法" class="headerlink" title="更大胆的想法"></a>更大胆的想法</h3><p>教务系统网页提交信息时都会同时提交ViewState，虽然没有学过ASP，但通过查询资料，我觉得这个地方大有文章可做。</p><p><img src="/images/jiaowu-system-analysis/devtools2.png"></p><p>尝试进行base64解码，结果里面出现了明文，说明没有经过加密。</p><p>资料：</p><blockquote><p>当 ASP .NET 中的表单被提交时，表单会随所有表单值一同重新出现。如何做到的呢？这是由于 ASP .NET 维持了您的 ViewState。ViewState 会在页面被提交到服务器时指示其状态。通过在每张页面中的一个 <code>&lt;form runat=&quot;server&quot;&gt;</code>控件中放置一个隐藏域，我们就可以定义页面的状态了。</p></blockquote><p>之后我专门查了关于这个VIEWSTATE里面的猫腻，发现了这个ViewState里面有不少可以利用的漏洞。</p><blockquote><p>其实ViewState 真正的问题在与其潜在的反序列化漏洞风险。ViewState 使用ObjectStateFormatter 进行反序列化，虽然ViewState 采取了加密和签名的安全措施。但是一旦泄露web.config，获取其加密和签名所用的密钥和算法，我们就可以将ObjectStateFormatte 的反序列化payload 进行同样的加密与签名，然后再发给服务器。这样ASP.NET在进行反序列化时，正常解密和校验，然后把payload交给ObjectStateFormatter 进行反序列化，触发其反序列化漏洞，实现RCE。</p></blockquote><p>由此，我们就可以在ViewState里进行XSS注入以实现跨站脚本攻击，从而在服务器上运行任意代码（我是这么理解的）。即使服务端开启了安全验证，我们仍然可以使用其他手段获取签名密钥以实现注入。</p><p>不过目前因为知识范围有限，暂时还没有进行相关的实验，以后有机会可以在教务系统上实验一下。</p><h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><ul><li><a href="https://www.anquanke.com/post/id/221630#h2-11">.Net 反序列化之 ViewState 利用</a></li><li><a href="https://dy.163.com/article/ETJ7B8OC0511CJ6O.html">如何借助ViewState在ASP.NET中实现反序列化漏洞利用</a></li><li><a href="https://blog.csdn.net/qq_41891666/article/details/107290131">asp.net 中 viewstate 反序列化攻击 学习记录</a></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> 网络安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Web学习笔记（一）</title>
      <link href="/posts/web-diary-1/"/>
      <url>/posts/web-diary-1/</url>
      
        <content type="html"><![CDATA[<h2 id="行内-inline-元素"><a href="#行内-inline-元素" class="headerlink" title="行内(inline)元素"></a>行内(inline)元素</h2><p>特点：</p><ul><li>和其他元素都在一行上</li><li>元素的高度、宽度、行高及顶部和底部边距不可设置</li><li>元素的宽度就是它包含的文字或图片的宽度，不可改变</li></ul><p>举例： </p><ul><li>a 标签</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://qq.com/&quot;</span>&gt;</span>QQ<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="块级-block-元素"><a href="#块级-block-元素" class="headerlink" title="块级(block)元素"></a>块级(block)元素</h2><p>特点：</p><ul><li>每个块级元素都从新的一行开始，并且其后的元素也另起一行。（一个块级元素独占一行）</li><li>元素的高度、宽度、行高以及顶和底边距都可设置</li><li>元素宽度在不设置的情况下，是它本身父容器的100%（和父元素的宽度一致），除非设定一个宽度</li></ul><p>举例：</p><ul><li>p,hn标签</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;text1&quot;</span>&gt;</span>HTML万岁<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">id</span>=<span class="string">&quot;text1&quot;</span>&gt;</span>HTML万岁<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="有序和无序列表"><a href="#有序和无序列表" class="headerlink" title="有序和无序列表"></a>有序和无序列表</h2><h3 id="有序列表-ol"><a href="#有序列表-ol" class="headerlink" title="有序列表(ol)"></a>有序列表(ol)</h3><ul><li>有序列表(Ordered List)是一列项目，列表项目使用数字进行标记</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ol</span> <span class="attr">type</span>=<span class="string">&quot;disc&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span>MIUI<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span>EMUI<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span>GIAO<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="无序列表-ul"><a href="#无序列表-ul" class="headerlink" title="无序列表(ul)"></a>无序列表(ul)</h3><ul><li>无序列表是一个项目的列表，此列项目使用粗体圆点（典型的小黑圆圈）进行标记</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">type</span>=<span class="string">&quot;disc&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span>MIUI<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span>EMUI<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span>&gt;</span>GIAO<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h2><blockquote><p>表格由<code>&lt;table&gt;</code>标签来定义。每个表格均有若干行（由 <tr> 标签定义），每行被分割为若干单元格（由 <td> 标签定义）。字母 td 指表格数据（table data），即数据单元格的内容。数据单元格可以包含文本、图片、列表、段落、表单、水平线、表格等等。</p></blockquote><ul><li>表格示例：</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">th</span>&gt;</span>姓名<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">th</span>&gt;</span>号码<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>Giao<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>110<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>Miao<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>120<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>表格样式示例；</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">table</span>&#123;</span><br><span class="line"><span class="attribute">border</span>: <span class="number">1px</span> solid;</span><br><span class="line"><span class="attribute">border-collapse</span>: collapse;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">th</span>,<span class="selector-tag">tr</span>,<span class="selector-tag">td</span>&#123;</span><br><span class="line"><span class="attribute">border</span>: <span class="number">1px</span> solid;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>表格跨行与跨列合并</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">th</span>&gt;</span>姓名<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">th</span>&gt;</span>号码<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">th</span>&gt;</span>地址<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>Giao<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>110<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">rowspan</span>=<span class="string">&quot;2&quot;</span>&gt;</span>派出所<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">&quot;2&quot;</span>&gt;</span>Miao<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- &lt;td&gt;120&lt;/td&gt; --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure><p>效果如下：</p><table>    <tr>        <th>姓名</th>        <th>号码</th>        <th>地址</th>    </tr>    <tr>        <td>Giao</td>        <td>110</td>        <td rowspan="2">派出所</td>    </tr>    <tr>        <td colspan="2">Miao</td>        <!-- <td>120</td> -->    </tr></table><h2 id="Form表单"><a href="#Form表单" class="headerlink" title="Form表单"></a>Form表单</h2><p>表单用于向服务器传输数据</p><ul><li>一个单选框表单示例</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">id</span>=<span class="string">&quot;male&quot;</span> <span class="attr">value</span>=<span class="string">&quot;male&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;male&quot;</span>&gt;</span>男<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">id</span>=<span class="string">&quot;female&quot;</span> <span class="attr">value</span>=<span class="string">&quot;female&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;female&quot;</span>&gt;</span>女<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure><p>效果如下：</p><form>    <input type="radio" name="sex" id="male" value="male"/><label for="male">男</label>    <input type="radio" name="sex" id="female" value="female"/><label for="female">女</label></form><ul><li>一个复选框表单示例</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">id</span>=<span class="string">&quot;basketball&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;basketball&quot;</span>&gt;</span>篮球<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">id</span>=<span class="string">&quot;football&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;football&quot;</span>&gt;</span>足球<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br></pre></td></tr></table></figure><p>效果如下：</p><p><input type="checkbox" id="basketball" name="hobby"><label for="basketball">篮球</label><br><input type="checkbox" id="football" name="hobby"><label for="football">足球</label></p><h2 id="Frame框架"><a href="#Frame框架" class="headerlink" title="Frame框架"></a>Frame框架</h2><h3 id="Frameset标签与Frame"><a href="#Frameset标签与Frame" class="headerlink" title="Frameset标签与Frame"></a>Frameset标签与Frame</h3><blockquote><p><code>frameset</code> 元素可定义一个框架集。它被用来组织多个窗口（框架）。每个框架存有独立的文档。在其最简单的应用中，frameset 元素仅仅会规定在框架集中存在多少列或多少行。您必须使用 cols 或 rows 属性。</p></blockquote><blockquote><p><code>&lt;frame&gt;</code> 标签定义 frameset 中的一个特定的窗口（框架）</p></blockquote><ul><li>一个Frameset页面示例</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">frameset</span> <span class="attr">rows</span>=<span class="string">&quot;20%,*&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">frame</span> <span class="attr">src</span>=<span class="string">&quot;top.html&quot;</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">frameset</span> <span class="attr">cols</span>=<span class="string">&quot;20%,*&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">frame</span> <span class="attr">src</span>=<span class="string">&quot;left.html&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">frame</span> <span class="attr">src</span>=<span class="string">&quot;right.html&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">frameset</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">frameset</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="iFrame标签"><a href="#iFrame标签" class="headerlink" title="iFrame标签"></a>iFrame标签</h3><blockquote><p>iframe 元素会创建包含另外一个文档的内联框架（即行内框架）</p></blockquote><p>iframe和frame的区别:</p><ul><li>frame不能脱离frameSet单独使用，iframe可以；</li><li>frame不能放在body中；</li></ul><p>一个展示本博客的iframe示例：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">width</span>=<span class="string">&quot;100%&quot;</span> <span class="attr">height</span>=<span class="string">&quot;500rem&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://blog.revincx.icu/&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure><p>效果如下（开始套娃）：</p><iframe width="100%" height="500rem" src="https://blog.revincx.icu/"></iframe><p>一个展示天气的iframe示例：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">width</span>=<span class="string">&quot;100%&quot;</span> <span class="attr">frameborder</span>=<span class="string">&quot;0&quot;</span> <span class="attr">scrolling</span>=<span class="string">&quot;no&quot;</span> <span class="attr">hspace</span>=<span class="string">&quot;0&quot;</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">src</span>=<span class="string">&quot;https://i.tianqi.com/?c=code&amp;a=getcode&amp;id=35&amp;py=zhengzhou&amp;site=34&amp;icon=1&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure><p>效果如下：</p><iframe width="100%" frameborder="0" scrolling="no" hspace="0" src="https://i.tianqi.com/?c=code&a=getcode&id=35&py=zhengzhou&site=34&icon=1"></iframe>]]></content>
      
      
      
        <tags>
            
            <tag> 编程 </tag>
            
            <tag> 网页设计 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>博客整活日记(长期更新)</title>
      <link href="/posts/blog-diary/"/>
      <url>/posts/blog-diary/</url>
      
        <content type="html"><![CDATA[<div class="timeline"><p class='p h2'>博客更新历史</p><div class="timenode"><div class="meta"><p><p>2020年9月15日</p></p></div><div class="body"><p>博客正式建立，使用了Github Pages加Hexo框架，主题使用MaterialFlow</p></div></div><div class="timenode"><div class="meta"><p><p>2020年11月15日</p></p></div><div class="body"><p>抛弃慢的一批的Github Pages，博客接入<a href="https://vercel.com/">Vercel</a>，访问速度可以感到明显的提升，虽然还是赶不上国内的CDN快，但基本够用了。</p></div></div><div class="timenode"><div class="meta"><p><p>2020年11月20日</p></p></div><div class="body"><p>将主题更换为<a href="https://github.com/jerryc127/hexo-theme-butterfly">ButterFly</a>，并参考<a href="https://www.antmoe.com/posts/a811d614/index.html">小康博客</a>做了一些修改，不得不说ButterFly的功能是真的多，现在感觉好看多了。后续应该还会继续美化，并准备接入评论系统，具体怎么搞还没想好。</p></div></div><div class="timenode"><div class="meta"><p><p>2021年2月5日</p></p></div><div class="body"><p>升级了Butterfly主题版本，并添加了一只萌萌哒的看板娘~ (尽 整 些 没 用 的</p></div></div></div>]]></content>
      
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> 网页设计 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>宗教答题直接满分的方法</title>
      <link href="/posts/contest-answer/"/>
      <url>/posts/contest-answer/</url>
      
        <content type="html"><![CDATA[<h3 id="电脑端"><a href="#电脑端" class="headerlink" title="电脑端"></a>电脑端</h3><p>打开答题页面，然后按F12打开开发者工具，点击上方的Console(或控制台)，粘贴下面的代码，回车。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> topicid=topicJsonArray[<span class="number">0</span>][<span class="string">&quot;TOPICID&quot;</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;topicJsonArray.length;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        topicJsonArray[i][<span class="string">&quot;TOPICID&quot;</span>]=topicid;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>注意会返回一串数字，如果没有就是复制的有问题。<br>&ensp;<br>然后在题库里搜索第一题的答案，把第一题的正确选项选上，直接点提交即可。</p><h3 id="手机端"><a href="#手机端" class="headerlink" title="手机端"></a>手机端</h3><p>下载并安装<a href="https://www.coolapk.com/apk/mark.via">Via浏览器</a><br>用这个浏览器打开答题页面，然后点开上方的标题栏，输入下面的代码并回车。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">javascript:<span class="keyword">var</span> kzt=<span class="built_in">document</span>.createElement(<span class="string">&quot;script&quot;</span>); kzt.src=<span class="string">&quot;//cdnjs.cloudflare.com/ajax/libs/vConsole/3.3.4/vconsole.min.js&quot;</span>; kzt.onload=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">new</span> VConsole();&#125;; <span class="built_in">document</span>.body.appendChild(kzt);</span><br></pre></td></tr></table></figure><p>然后界面会多出来一个vConsole按钮，点开，在Console栏下面的Command输入框内输入下面的代码并回车。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> topicid=topicJsonArray[<span class="number">0</span>][<span class="string">&quot;TOPICID&quot;</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;topicJsonArray.length;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        topicJsonArray[i][<span class="string">&quot;TOPICID&quot;</span>]=topicid;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>然后点一下上面的部分返回答题界面，同样是把第一题答对提交即可。</p><h4 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h4><p>复制代码的时候不要把左边的行号复制上。<br>输完代码回车后不要刷新页面，否则需要重新输一次。</p>]]></content>
      
      
      
        <tags>
            
            <tag> 编程 </tag>
            
            <tag> 教程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Easy163添加倒带支持和通知栏快捷设置</title>
      <link href="/posts/modify-easy163/"/>
      <url>/posts/modify-easy163/</url>
      
        <content type="html"><![CDATA[<p>&emsp;&emsp;众所周知(屁)，<a href="https://github.com/ndroi/easy163">Easy163</a>通过拦截网易云的流量请求，从而实现一些比较NB的效果，比如无版权歌曲下载和付费歌曲下载。可是笔者更喜欢用<a href="https://dniwer.me/">倒带</a>，而Easy163却不支持倒带，于是决定自己来试试适配倒带。</p><h4 id="适配倒带"><a href="#适配倒带" class="headerlink" title="适配倒带"></a>适配倒带</h4><p>&emsp;&emsp;先在Github仓库搜下网易云的包名，结果如下：<br><img src="/images/modify-easy163/pic1.png"><br>吆西，AS启动！</p><p>打开LocalVPNServices.java，定位到如下代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">try</span></span><br><span class="line">                    &#123;</span><br><span class="line">                        builder.addAllowedApplication(<span class="string">&quot;com.netease.cloudmusic&quot;</span>);</span><br><span class="line">                    &#125;<span class="keyword">catch</span> (PackageManager.NameNotFoundException e)</span><br><span class="line">                    &#123;</span><br><span class="line">                        Log.d(TAG, <span class="string">&quot;未检测到网易云音乐&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">try</span></span><br><span class="line">                    &#123;</span><br><span class="line">                        builder.addAllowedApplication(<span class="string">&quot;com.netease.cloudmusic.lite&quot;</span>);</span><br><span class="line">                    &#125;<span class="keyword">catch</span> (PackageManager.NameNotFoundException e)</span><br><span class="line">                    &#123;</span><br><span class="line">                        Log.d(TAG, <span class="string">&quot;未检测到网易云音乐极速版&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br></pre></td></tr></table></figure><p>在这一段结尾加上倒带包名：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span></span><br><span class="line">                    &#123;</span><br><span class="line">                        builder.addAllowedApplication(<span class="string">&quot;com.kuss.rewind&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">catch</span> (PackageManager.NameNotFoundException e)</span><br><span class="line">                    &#123;</span><br><span class="line">                        Log.d(TAG,<span class="string">&quot;未检测到倒带&quot;</span>);</span><br><span class="line">                    &#125;</span><br></pre></td></tr></table></figure><p>&emsp;&emsp;然后就是对数据包的处理了，这里本来是想着播放列表的请求也要拦截的，最好发现倒带对歌曲播放链接的请求机制和网易云不太一样，于是放弃对Playlist.java的修改，直接修改SongPlayHook.java。之间又发现一个小细节，倒带的请求头host是小写，而网易云请求头Host是大写，就因为这个小细节不知道浪费了我多少时间…</p><p>在SongPlayHook.java的请求判断加上下面的代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(host != <span class="keyword">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(method.equals(<span class="string">&quot;GET&quot;</span>) &amp;&amp; host.endsWith(<span class="string">&quot;music.163.com&quot;</span>) &amp;&amp; path.contains(<span class="string">&quot;/song/enhance/player/url&quot;</span>))</span><br><span class="line">            &#123;</span><br><span class="line">                Log.d(<span class="string">&quot;check rule&quot;</span>,<span class="string">&quot;Rewind&quot;</span>);</span><br><span class="line">                isRewind = <span class="keyword">true</span>;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><p>同时，倒带的请求没有AES加密，而网易云都有AES加密，所以在hookResponse方法内加上判断，如果是倒带的请求则不采用AES加解密，代码如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">super</span>.hookResponse(response);</span><br><span class="line">        <span class="keyword">byte</span>[] bytes = response.getContent();</span><br><span class="line">        Log.d(<span class="string">&quot;ResponseSong:&quot;</span>,<span class="keyword">new</span> String(bytes));</span><br><span class="line">        <span class="keyword">if</span> (!isRewind)</span><br><span class="line">        &#123;</span><br><span class="line">            bytes = Crypto.aesDecrypt(bytes);</span><br><span class="line">        &#125;</span><br><span class="line">        JSONObject jsonObject = JSONObject.parseObject(<span class="keyword">new</span> String(bytes));</span><br><span class="line">        handleNoFreeSong(jsonObject);</span><br><span class="line">        bytes = JSONObject.toJSONString(jsonObject, SerializerFeature.WriteMapNullValue).getBytes();</span><br><span class="line">        <span class="keyword">if</span>(!isRewind)</span><br><span class="line">        &#123;</span><br><span class="line">            bytes = Crypto.aesEncrypt(bytes);</span><br><span class="line">        &#125;</span><br><span class="line">        Log.d(<span class="string">&quot;ResponseSong hooked:&quot;</span>,<span class="keyword">new</span> String(bytes));</span><br><span class="line">        response.setContent(bytes);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>其中的isRewind是在BaseHook.java添加的布尔值变量。</p><p>还有一个小问题，倒带的请求结果JSON与网易云的也有区别，比如data数组里请求码套在了外面，所以还要在handleNoFreeSong方法里加上判断，代码跟上面判断差不多，就不放了。</p><p>看下效果：<br><img src="/images/modify-easy163/pic2.jpg"></p><h4 id="添加通知栏快捷设置"><a href="#添加通知栏快捷设置" class="headerlink" title="添加通知栏快捷设置"></a>添加通知栏快捷设置</h4><p>&emsp;&emsp;这个应该比上面的简单一点。新建类QuickTileService继承自TileService。由于Service内不能直接创建新VPN，所以要先判断是否已经创建过，代码如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onClick();</span><br><span class="line">        Tile tile = getQsTile();</span><br><span class="line">        <span class="keyword">int</span> State = tile.getState();</span><br><span class="line">        <span class="keyword">if</span>(State == Tile.STATE_INACTIVE)</span><br><span class="line">        &#123;</span><br><span class="line">            Intent vpnIntent = VpnService.prepare(<span class="keyword">this</span>);</span><br><span class="line">            <span class="keyword">if</span> (vpnIntent != <span class="keyword">null</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Intent intent = <span class="keyword">new</span> Intent(<span class="keyword">this</span>, MainActivity.class);</span><br><span class="line">                intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);</span><br><span class="line">                startActivity(intent);</span><br><span class="line">                Toast.makeText(<span class="keyword">this</span>,<span class="string">&quot;请先在软件内开启一次VPN！&quot;</span>,Toast.LENGTH_LONG).show();</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                Intent intent = <span class="keyword">new</span> Intent(<span class="keyword">this</span>, LocalVPNService.class);</span><br><span class="line">                startService(intent);</span><br><span class="line">            &#125;</span><br><span class="line">            tile.setState(Tile.STATE_ACTIVE);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            Intent intent = <span class="keyword">new</span> Intent(<span class="string">&quot;activity&quot;</span>);</span><br><span class="line">            intent.putExtra(<span class="string">&quot;cmd&quot;</span>, <span class="string">&quot;stop&quot;</span>);</span><br><span class="line">            LocalBroadcastManager.getInstance(<span class="keyword">this</span>).sendBroadcast(intent);</span><br><span class="line">            Log.d(<span class="string">&quot;stopVPN&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后在AndroidManifest.xml里面添加服务，代码如下：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">service</span> <span class="attr">android:name</span>=<span class="string">&quot;.utils.QuickTileService&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:label</span>=<span class="string">&quot;@string/app_name&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:icon</span>=<span class="string">&quot;@drawable/ic_netease_cloud_music&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:permission</span>=<span class="string">&quot;android.permission.BIND_QUICK_SETTINGS_TILE&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">&quot;android.service.quicksettings.action.QS_TILE&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">meta-data</span> <span class="attr">android:name</span>=<span class="string">&quot;android.service.quicksettings.ACTIVE_TILE&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">service</span>&gt;</span></span><br></pre></td></tr></table></figure><p>编译运行看一下效果：<br><img src="/images/modify-easy163/pic3.jpg"><br>效果还不错，然后就可以正式打包成APK文件了。</p><h4 id="结尾"><a href="#结尾" class="headerlink" title="结尾"></a>结尾</h4><p>写这篇文章加上写代码总共花了大半天时间吧，更改后的代码我会放在GitHub，并且尝试合并到原作者的项目。</p><p>下载地址：<a href="https://revincx.lanzous.com/b05glzona">点这里</a><br>安装不上的请先卸载旧版本<br>已知Bug：部分情况下网易云会无法播放歌曲，<del>清除缓存即可</del>还是用原版吧。</p><p>都看到这里了，还不去酷安给个三连支持一下？</p>]]></content>
      
      
      
        <tags>
            
            <tag> 安卓 </tag>
            
            <tag> 编程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/posts/hello-world/"/>
      <url>/posts/hello-world/</url>
      
        <content type="html"><![CDATA[<p><strong>Q：这是什么东西？</strong><br><strong>A：这是<a href="https://hexo.io/">Hexo</a>自动生成的测试文章，无视即可。</strong></p><p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
