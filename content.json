{"meta":{"title":"Revincx的小破站","subtitle":"造轮子的地方","description":null,"author":"Revincx","url":"https://blog.revincx.icu","root":"/"},"pages":[{"title":"标签","date":"2020-11-22T03:03:19.000Z","updated":"2021-02-05T06:32:18.386Z","comments":true,"path":"tags/index.html","permalink":"https://blog.revincx.icu/tags/index.html","excerpt":"","text":"文章标签："},{"title":"关于","date":"2020-09-15T04:04:15.000Z","updated":"2020-11-20T14:02:28.459Z","comments":true,"path":"about/index.html","permalink":"https://blog.revincx.icu/about/index.html","excerpt":"","text":"&emsp;&emsp;普通学生狗一枚，业余喜欢写写代码，做做图，也就天天混吃混喝的样子吧(emm)。 技术&emsp;&emsp;学过Java，以前开发过一个比较简陋的安卓软件(因为没人用就删库了)，尝试用Java写过爬虫(因为不会Python)，对C语言略微了解(只是了解)。折腾过服务器(脚本复制粘贴)，会一些基本的Linux操作(比如开关机还有ping)。安卓方面喜欢刷机root啥的(日常变砖)，用过Xposed框架(包括Riru)，MIUI钉子户(真香)。网络方面会一点抓包注入啥的(然而连JSON都看不懂)，也折腾过路由器，不过现在基本不玩了。以前学过Photoshop(快忘完了)，用Illustrator做过图标(其实是现学的)，剪辑只接触过一点，基本操作也是都不记得了…. &emsp;&emsp;总结：四个字，啥都不会！ 博客&emsp;&emsp;博客是用Github Pages加上Hexo搭建的，主题是ButterFly，换主题后瞬间上档次。本博客上线于2020年暑假，以后会慢慢更新文章的(新建文件夹.jpg)。 联系我酷安GithubTelegram"}],"posts":[{"title":"SolidWorks 2020 破解教程","slug":"solidworks-crack","date":"2021-01-22T01:50:14.000Z","updated":"2021-01-22T04:22:43.053Z","comments":true,"path":"posts/solidworks-crack/","link":"","permalink":"https://blog.revincx.icu/posts/solidworks-crack/","excerpt":"","text":"话不多说，直接开始。下载并解压缩后我们会得到下面的文件(夹) SolidWorks.2020.SP3.0.Full.Premium.DVD.iso (主安装文件) SW2020 SP2 fixed SPRs.7z _SolidSQUAD_ (破解补丁) 在_SolidSQUAD_目录下有一个英文版的readme.txt，我们就依照这里的步骤进行安装。 If you already have SW2020 cracked by SSQ installed you can just update existing SW2020 to this one. No additional crack is needed So you can skip steps 1-5 如果你已经安装过了被SSQ破解过的2020版，你可以仅仅升级到此版本并跳过1-5步。 安装前准备断网并准备.NET环境 Before installation, block the outgoing Internet access by means of Windows Firewall or cord plug. Check .NET Framework 3.5 and 4.0 are installed. If .NET Framework 3.5 (including 2.0) is not installed, go to “Control Panel” -&gt; “Programs and Features” -&gt; “Turn Windows features on or off” -&gt; select “.NET Framework 3.5 (including 2.0)” 大概意思就是安装前要断网，然后检查一下有没有安装.NET框架，如果没安装这个框架，去控制面板（从任务栏的搜索框里可以找到）-&gt; 程序和功能 -&gt; 启用或关闭Windows功能里面，把.NET Framework 3.5（.NET 2.0 和 3.0）这一项前面的复选框选中即可（不需要展开）。 添加注册表解压_SolidSQUAD_目录下的SolidSQUAD.7z,双击sw2020_network_serials_licensing.reg并点击确定，将该项添加到注册表。 准备本地Server环境把SolidWorks_Flexnet_Server这个文件夹复制到C盘（其实复制到其他地方也行，只要以后不删掉），右键选择文件夹中的server_install.bat，点击以管理员身份运行。 出现SolidWorks Flexnet Server 服务已经启动成功即可关闭。 开始安装解压SolidWorks.2020.SP3.0.Full.Premium.DVD.iso，打开setup.exe。(其实win10以上也可以直接双击点开，这样会加载成虚拟光驱) 选择 在此计算机上安装，下一步，下一步。 当碰到下面的弹窗时，点击取消。 自行更改安装位置。勾选我接受 SOLIDWORKS 条款 出现如下窗口，确保端口@服务器填的是25734@localhost 安装过程比较耗时间，建议先去吃顿饭或者开一局游戏。 安装完成。 安装后还没完呢，把_SolidSQUAD_\\Program Files\\SOLIDWORKS Corp下的所有文件，复制到你的安装目录。比如你安装在了D盘SolidWorks目录下，那么就把这些文件全部复制到该目录。 双击刚才_SolidSQUAD_目录下的SolidSQUADLoaderEnabler.reg，点击确定。 重启你的电脑。 打开SOLIDWORKS 2020，点击右上角的小问号，点击SolidNetWork License Manager，在弹出的窗口中点击许可顺序选项卡，然后把所有以Premium结尾的项目移动到最上方。点击应用，确定。 破解完成，已经可以联网了。 后记大概分析了一下破解原理，相当于在本地搭建了一个Solidworks许可证的服务器，然后控制SolidWorks从本地的的许可服务器获取许可证。原理很巧妙，但也有不足的一点，本地的运行的服务需要一直挂在后台，虽然占用的内存不多，但确实有点鸡肋。 话说回来，SolidWroks足足占用了我将近20G的空间，而且我甚至感觉开机都变慢了，我在考虑要不还是卸了算了…","categories":[],"tags":[{"name":"教程","slug":"教程","permalink":"https://blog.revincx.icu/tags/%E6%95%99%E7%A8%8B/"}]},{"title":"一次腾讯云函数的适配开发","slug":"tencent-scf-dev","date":"2021-01-18T09:34:08.000Z","updated":"2021-01-18T10:10:09.990Z","comments":true,"path":"posts/tencent-scf-dev/","link":"","permalink":"https://blog.revincx.icu/posts/tencent-scf-dev/","excerpt":"","text":"好长时间没有更新博客了，正好前天做了一个自动打卡脚本在腾讯云函数上的适配，中间遇到了一些问题，于是写篇文章来记录一下。 获取用户信息之前的脚本是在Github Actions上定时运行的，获取用户信息的方案是从项目的Secrets中读取。中间其实还有写入到命令行然后再从命令行中读取字符等过程，目的只是保护用户信息不泄露。 命令行： 123python3 main.py &lt;&lt;EOF$&#123;&#123;secrets.USERS&#125;&#125;EOF 读取： 123456789while True: try: users = input() info = users.split(&#x27;,&#x27;) phone.append(info[0]) password.append(info[1]) sckey.append(info[2]) except: break 对于腾讯云函数，我采用的方法是将SCKEY和用户的信息都放入环境变量，这样别人在使用脚本的时候就只需要添加环境变量即可，不用修改代码。 修改之后的读取操作： 12345678910while True: try: user = os.environ.get(&#x27;user&#x27; + str(i)) if user is None: break phone.append(user.split(&#x27;,&#x27;)[0]) password.append(user.split(&#x27;,&#x27;)[1]) i+=1 except: break 添加依赖这是最麻烦的地方，腾讯云函数的运行环境并不是啥依赖都有，查询文档后得知没有的依赖需要和代码包一同打包上传。 在 requirements.txt 中配置依赖信息。 通过 pip install -r requirements.txt -t . 命令安装依赖包。 上传代码库时请将依赖库一同打包上传。 于是尝试把pycrytodome的Cryto模块打包直接上传，结果并不能运行。 查询文档: 函数运行的系统是 CentOS 7，您需要在相同环境下进行安装。若环境不一致，则可能导致上传后运行时出现找不到依赖的错误。您可参考云函数容器镜像进行依赖安装。 看了一下关于容器镜像的文档，好家伙还要用到Docker，但我之前连Docker是干啥的都不知道。。 没办法，硬着头皮下了一个Docker Desktop，升级了下wsl子系统环境（虽然并没有用到wsl2），让后用命令docker pull ccr.ccs.tencentyun.com/scf-repo/runtime-python3:latest拉取容器镜像，把项目文件夹挂载到镜像容器内，然后使用下面的命令安装依赖： pip3 install pipreqspipreqs ./pip install -r requirements.txt -t ./ 其中pipreqs把urllib和requests这两个依赖也放进了requirements.txt，但腾讯云函数的运行环境已经有这两个依赖了，手动去掉即可。 安装完依赖后打包上传，部署并测试，终于能够正常运行了。","categories":[],"tags":[{"name":"编程","slug":"编程","permalink":"https://blog.revincx.icu/tags/%E7%BC%96%E7%A8%8B/"}]},{"title":"学校教务系统的漏洞分析","slug":"jiaowu-system-analysis","date":"2020-12-16T03:05:45.000Z","updated":"2020-12-16T05:02:21.958Z","comments":true,"path":"posts/jiaowu-system-analysis/","link":"","permalink":"https://blog.revincx.icu/posts/jiaowu-system-analysis/","excerpt":"","text":"起因本来是想着用Python写一个抢课的脚本，没想到在研究教务系统的网页时发现了我们教务系统漏洞还挺多。 学校教务系统搭建在IIS上，这个方正教务系统用的是ASP .NET,系统版本还是2017年的，据我们学长说以前也被人搞过，但仍然很长一段时间都没有升级系统。 分析这里我已经提前知道了我们选课的那个页面对应xsxk.aspx，但教务系统首页现在的导航栏你活动报名一栏没有开放学生选课的入口，于是我们尝试把地址栏中的xs_main.aspx改为xsxk.aspx。一开始服务器返回了302，页面显示：Object moved to here，没事我们直接点进去，然后会有一个alert弹出，直接忽略就能进去了。 点一下查看课表就可以把隐藏的按钮显示出来。 点选修课程，然后会有一个窗口弹出，这里可能会被chrome拦截，点地址栏的允许弹出窗口就行了。 随便选一个项目，然后点选定，这时主窗口的课程列表就会更新。 随便点一个课程然后又会有一个弹出窗口，同时会有不允许选课的alert弹出。 这时我们不要点确定，否则窗口就会被关闭。复制这个窗口地址栏的网址，新建一个标签页打开。弹出alert后就可以直接点确定，不出意外的话这个标签页应该不会被关闭。 但是这个页面仍然不允许选课，没事，依照刚才的思路，一定是有东西被隐藏了。我们通过开发人员工具可以发现，关闭按钮前面还有两个button的样式都被设为了DISPLAY:NONE。 把这两个button的DISPLAY属性都取消掉，关闭按钮前面就会出现两个空白的按钮。尝试点第一个按钮，就会弹出如下提示。 同时我们想要的选课界面就出来了。 选中单选框并选中不预定教材，然后点点选定按钮提交，就会用保存成功的提示。 我们回到之前的页面查看我们的已选课程： 已选课程里面已经有了我们刚才选的课。 更大胆的想法教务系统网页提交信息时都会同时提交ViewState，虽然没有学过ASP，但通过查询资料，我觉得这个地方大有文章可做。 尝试进行base64解码，结果里面出现了明文，说明没有经过加密。 资料： 当 ASP .NET 中的表单被提交时，表单会随所有表单值一同重新出现。如何做到的呢？这是由于 ASP .NET 维持了您的 ViewState。ViewState 会在页面被提交到服务器时指示其状态。通过在每张页面中的一个 &lt;form runat=&quot;server&quot;&gt;控件中放置一个隐藏域，我们就可以定义页面的状态了。 之后我专门查了关于这个VIEWSTATE里面的猫腻，发现了这个ViewState里面有不少可以利用的漏洞。 其实ViewState 真正的问题在与其潜在的反序列化漏洞风险。ViewState 使用ObjectStateFormatter 进行反序列化，虽然ViewState 采取了加密和签名的安全措施。但是一旦泄露web.config，获取其加密和签名所用的密钥和算法，我们就可以将ObjectStateFormatte 的反序列化payload 进行同样的加密与签名，然后再发给服务器。这样ASP.NET在进行反序列化时，正常解密和校验，然后把payload交给ObjectStateFormatter 进行反序列化，触发其反序列化漏洞，实现RCE。 由此，我们就可以在ViewState里进行XSS注入以实现跨站脚本攻击，从而在服务器上运行任意代码（我是这么理解的）。即使服务端开启了安全验证，我们仍然可以使用其他手段获取签名密钥以实现注入。 不过目前因为知识范围有限，暂时还没有进行相关的实验，以后有机会可以在教务系统上实验一下。 参考资料 .Net 反序列化之 ViewState 利用 如何借助ViewState在ASP.NET中实现反序列化漏洞利用 asp.net 中 viewstate 反序列化攻击 学习记录","categories":[],"tags":[{"name":"网络安全","slug":"网络安全","permalink":"https://blog.revincx.icu/tags/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/"}]},{"title":"Web学习笔记（一）","slug":"web-diary-1","date":"2020-11-21T15:07:06.000Z","updated":"2020-11-22T07:33:16.896Z","comments":true,"path":"posts/web-diary-1/","link":"","permalink":"https://blog.revincx.icu/posts/web-diary-1/","excerpt":"","text":"行内(inline)元素特点： 和其他元素都在一行上 元素的高度、宽度、行高及顶部和底部边距不可设置 元素的宽度就是它包含的文字或图片的宽度，不可改变 举例： a 标签 1&lt;a href=&quot;http://qq.com/&quot;&gt;QQ&lt;/a&gt; 块级(block)元素特点： 每个块级元素都从新的一行开始，并且其后的元素也另起一行。（一个块级元素独占一行） 元素的高度、宽度、行高以及顶和底边距都可设置 元素宽度在不设置的情况下，是它本身父容器的100%（和父元素的宽度一致），除非设定一个宽度 举例： p,hn标签 12&lt;p id=&quot;text1&quot;&gt;HTML万岁&lt;/p&gt;&lt;h1 id=&quot;text1&quot;&gt;HTML万岁&lt;/h1&gt; 有序和无序列表有序列表(ol) 有序列表(Ordered List)是一列项目，列表项目使用数字进行标记 12345&lt;ol type=&quot;disc&quot;&gt; &lt;li&gt;MIUI&lt;/li&gt; &lt;li&gt;EMUI&lt;/li&gt; &lt;li&gt;GIAO&lt;/li&gt;&lt;/ol&gt; 无序列表(ul) 无序列表是一个项目的列表，此列项目使用粗体圆点（典型的小黑圆圈）进行标记 12345&lt;ul type=&quot;disc&quot;&gt; &lt;li&gt;MIUI&lt;/li&gt; &lt;li&gt;EMUI&lt;/li&gt; &lt;li&gt;GIAO&lt;/li&gt;&lt;/ul&gt; 表格 表格由&lt;table&gt;标签来定义。每个表格均有若干行（由 标签定义），每行被分割为若干单元格（由 标签定义）。字母 td 指表格数据（table data），即数据单元格的内容。数据单元格可以包含文本、图片、列表、段落、表单、水平线、表格等等。 表格示例： 1234567891011121314&lt;table&gt; &lt;tr&gt; &lt;th&gt;姓名&lt;/th&gt; &lt;th&gt;号码&lt;/th&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;Giao&lt;/td&gt; &lt;td&gt;110&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;Miao&lt;/td&gt; &lt;td&gt;120&lt;/td&gt; &lt;/tr&gt;&lt;/table&gt; 表格样式示例； 1234567table&#123; border: 1px solid; border-collapse: collapse;&#125;th,tr,td&#123; border: 1px solid;&#125; 表格跨行与跨列合并 12345678910111213141516&lt;table&gt; &lt;tr&gt; &lt;th&gt;姓名&lt;/th&gt; &lt;th&gt;号码&lt;/th&gt; &lt;th&gt;地址&lt;/th&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;Giao&lt;/td&gt; &lt;td&gt;110&lt;/td&gt; &lt;td rowspan=&quot;2&quot;&gt;派出所&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td colspan=&quot;2&quot;&gt;Miao&lt;/td&gt; &lt;!-- &lt;td&gt;120&lt;/td&gt; --&gt; &lt;/tr&gt;&lt;/table&gt; 效果如下： 姓名 号码 地址 Giao 110 派出所 Miao Form表单表单用于向服务器传输数据 一个单选框表单示例 1234&lt;form&gt; &lt;input type=&quot;radio&quot; name=&quot;sex&quot; id=&quot;male&quot; value=&quot;male&quot;/&gt;&lt;label for=&quot;male&quot;&gt;男&lt;/label&gt; &lt;input type=&quot;radio&quot; name=&quot;sex&quot; id=&quot;female&quot; value=&quot;female&quot;/&gt;&lt;label for=&quot;female&quot;&gt;女&lt;/label&gt;&lt;/form&gt; 效果如下： 男 女 一个复选框表单示例 12&lt;input type=&quot;checkbox&quot; id=&quot;basketball&quot; name=&quot;hobby&quot;&gt;&lt;label for=&quot;basketball&quot;&gt;篮球&lt;/label&gt;&lt;input type=&quot;checkbox&quot; id=&quot;football&quot; name=&quot;hobby&quot;&gt;&lt;label for=&quot;football&quot;&gt;足球&lt;/label&gt; 效果如下： 篮球足球 Frame框架Frameset标签与Frame frameset 元素可定义一个框架集。它被用来组织多个窗口（框架）。每个框架存有独立的文档。在其最简单的应用中，frameset 元素仅仅会规定在框架集中存在多少列或多少行。您必须使用 cols 或 rows 属性。 &lt;frame&gt; 标签定义 frameset 中的一个特定的窗口（框架） 一个Frameset页面示例 1234567&lt;frameset rows=&quot;20%,*&quot; /&gt; &lt;frame src=&quot;top.html&quot; &gt; &lt;frameset cols=&quot;20%,*&quot;&gt; &lt;frame src=&quot;left.html&quot; /&gt; &lt;frame src=&quot;right.html&quot; /&gt; &lt;/frameset&gt;&lt;/frameset&gt; iFrame标签 iframe 元素会创建包含另外一个文档的内联框架（即行内框架） iframe和frame的区别: frame不能脱离frameSet单独使用，iframe可以； frame不能放在body中； 一个展示本博客的iframe示例： 12&lt;iframe width=&quot;100%&quot; height=&quot;500rem&quot; src=&quot;https://blog.revincx.icu/&quot;&gt;&lt;/iframe&gt; 效果如下（开始套娃）： 一个展示天气的iframe示例： 1234&lt;iframe width=&quot;100%&quot; frameborder=&quot;0&quot; scrolling=&quot;no&quot; hspace=&quot;0&quot; src=&quot;https://i.tianqi.com/?c=code&amp;a=getcode&amp;id=35&amp;py=zhengzhou&amp;site=34&amp;icon=1&quot;&gt;&lt;/iframe&gt; 效果如下：","categories":[],"tags":[{"name":"编程","slug":"编程","permalink":"https://blog.revincx.icu/tags/%E7%BC%96%E7%A8%8B/"},{"name":"网页设计","slug":"网页设计","permalink":"https://blog.revincx.icu/tags/%E7%BD%91%E9%A1%B5%E8%AE%BE%E8%AE%A1/"}]},{"title":"博客整活日记","slug":"blog-diary","date":"2020-11-20T09:19:21.000Z","updated":"2021-02-09T02:31:28.313Z","comments":true,"path":"posts/blog-diary/","link":"","permalink":"https://blog.revincx.icu/posts/blog-diary/","excerpt":"","text":"博客更新历史 2020年9月15日 博客正式建立，使用了Github Pages加Hexo框架，主题使用MaterialFlow 2020年11月15日 抛弃慢的一批的Github Pages，博客接入Vercel，访问速度可以感到明显的提升，虽然还是赶不上国内的CDN快，但基本够用了。 2020年11月20日 将主题更换为ButterFly，并参考小康博客做了一些修改，不得不说ButterFly的功能是真的多，现在感觉好看多了。后续应该还会继续美化，并准备接入评论系统，具体怎么搞还没想好。 2021年2月5日 升级了Butterfly主题版本，并添加了一只萌萌哒的看板娘~ (尽 整 些 没 用 的","categories":[],"tags":[{"name":"网页设计","slug":"网页设计","permalink":"https://blog.revincx.icu/tags/%E7%BD%91%E9%A1%B5%E8%AE%BE%E8%AE%A1/"},{"name":"Hexo","slug":"Hexo","permalink":"https://blog.revincx.icu/tags/Hexo/"}]},{"title":"宗教答题直接满分的方法","slug":"contest-answer","date":"2020-11-15T10:35:44.000Z","updated":"2021-01-22T01:51:39.933Z","comments":true,"path":"posts/contest-answer/","link":"","permalink":"https://blog.revincx.icu/posts/contest-answer/","excerpt":"","text":"电脑端打开答题页面，然后按F12打开开发者工具，点击上方的Console(或控制台)，粘贴下面的代码，回车。 12345var topicid=topicJsonArray[0][&quot;TOPICID&quot;]; for(var i=0;i&lt;topicJsonArray.length;i++) &#123; topicJsonArray[i][&quot;TOPICID&quot;]=topicid; &#125; 注意会返回一串数字，如果没有就是复制的有问题。&ensp;然后在题库里搜索第一题的答案，把第一题的正确选项选上，直接点提交即可。 手机端下载并安装Via浏览器用这个浏览器打开答题页面，然后点开上方的标题栏，输入下面的代码并回车。 1javascript:var kzt=document.createElement(&quot;script&quot;); kzt.src=&quot;//cdnjs.cloudflare.com/ajax/libs/vConsole/3.3.4/vconsole.min.js&quot;; kzt.onload=function()&#123;new VConsole();&#125;; document.body.appendChild(kzt); 然后界面会多出来一个vConsole按钮，点开，在Console栏下面的Command输入框内输入下面的代码并回车。 12345var topicid=topicJsonArray[0][&quot;TOPICID&quot;]; for(var i=0;i&lt;topicJsonArray.length;i++) &#123; topicJsonArray[i][&quot;TOPICID&quot;]=topicid; &#125; 然后点一下上面的部分返回答题界面，同样是把第一题答对提交即可。 注意复制代码的时候不要把左边的行号复制上。输完代码回车后不要刷新页面，否则需要重新输一次。","categories":[],"tags":[{"name":"编程","slug":"编程","permalink":"https://blog.revincx.icu/tags/%E7%BC%96%E7%A8%8B/"},{"name":"教程","slug":"教程","permalink":"https://blog.revincx.icu/tags/%E6%95%99%E7%A8%8B/"}]},{"title":"Easy163添加倒带支持和通知栏快捷设置","slug":"modify-easy163","date":"2020-09-20T04:52:48.000Z","updated":"2020-11-20T14:02:28.459Z","comments":true,"path":"posts/modify-easy163/","link":"","permalink":"https://blog.revincx.icu/posts/modify-easy163/","excerpt":"","text":"&emsp;&emsp;众所周知(屁)，Easy163通过拦截网易云的流量请求，从而实现一些比较NB的效果，比如无版权歌曲下载和付费歌曲下载。可是笔者更喜欢用倒带，而Easy163却不支持倒带，于是决定自己来试试适配倒带。 适配倒带&emsp;&emsp;先在Github仓库搜下网易云的包名，结果如下：吆西，AS启动！ 打开LocalVPNServices.java，定位到如下代码： 1234567891011121314151617if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) &#123; try &#123; builder.addAllowedApplication(&quot;com.netease.cloudmusic&quot;); &#125;catch (PackageManager.NameNotFoundException e) &#123; Log.d(TAG, &quot;未检测到网易云音乐&quot;); &#125; try &#123; builder.addAllowedApplication(&quot;com.netease.cloudmusic.lite&quot;); &#125;catch (PackageManager.NameNotFoundException e) &#123; Log.d(TAG, &quot;未检测到网易云音乐极速版&quot;); &#125; &#125; 在这一段结尾加上倒带包名： 12345678try &#123; builder.addAllowedApplication(&quot;com.kuss.rewind&quot;); &#125; catch (PackageManager.NameNotFoundException e) &#123; Log.d(TAG,&quot;未检测到倒带&quot;); &#125; &emsp;&emsp;然后就是对数据包的处理了，这里本来是想着播放列表的请求也要拦截的，最好发现倒带对歌曲播放链接的请求机制和网易云不太一样，于是放弃对Playlist.java的修改，直接修改SongPlayHook.java。之间又发现一个小细节，倒带的请求头host是小写，而网易云请求头Host是大写，就因为这个小细节不知道浪费了我多少时间… 在SongPlayHook.java的请求判断加上下面的代码： 123456789if(host != null) &#123; if(method.equals(&quot;GET&quot;) &amp;&amp; host.endsWith(&quot;music.163.com&quot;) &amp;&amp; path.contains(&quot;/song/enhance/player/url&quot;)) &#123; Log.d(&quot;check rule&quot;,&quot;Rewind&quot;); isRewind = true; return true; &#125; &#125; 同时，倒带的请求没有AES加密，而网易云都有AES加密，所以在hookResponse方法内加上判断，如果是倒带的请求则不采用AES加解密，代码如下： 1234567891011121314151617super.hookResponse(response); byte[] bytes = response.getContent(); Log.d(&quot;ResponseSong:&quot;,new String(bytes)); if (!isRewind) &#123; bytes = Crypto.aesDecrypt(bytes); &#125; JSONObject jsonObject = JSONObject.parseObject(new String(bytes)); handleNoFreeSong(jsonObject); bytes = JSONObject.toJSONString(jsonObject, SerializerFeature.WriteMapNullValue).getBytes(); if(!isRewind) &#123; bytes = Crypto.aesEncrypt(bytes); &#125; Log.d(&quot;ResponseSong hooked:&quot;,new String(bytes)); response.setContent(bytes);&#125; 其中的isRewind是在BaseHook.java添加的布尔值变量。 还有一个小问题，倒带的请求结果JSON与网易云的也有区别，比如data数组里请求码套在了外面，所以还要在handleNoFreeSong方法里加上判断，代码跟上面判断差不多，就不放了。 看下效果： 添加通知栏快捷设置&emsp;&emsp;这个应该比上面的简单一点。新建类QuickTileService继承自TileService。由于Service内不能直接创建新VPN，所以要先判断是否已经创建过，代码如下： 123456789101112131415161718192021222324252627282930public void onClick() &#123; super.onClick(); Tile tile = getQsTile(); int State = tile.getState(); if(State == Tile.STATE_INACTIVE) &#123; Intent vpnIntent = VpnService.prepare(this); if (vpnIntent != null) &#123; Intent intent = new Intent(this, MainActivity.class); intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); startActivity(intent); Toast.makeText(this,&quot;请先在软件内开启一次VPN！&quot;,Toast.LENGTH_LONG).show(); return; &#125; else &#123; Intent intent = new Intent(this, LocalVPNService.class); startService(intent); &#125; tile.setState(Tile.STATE_ACTIVE); &#125; else &#123; Intent intent = new Intent(&quot;activity&quot;); intent.putExtra(&quot;cmd&quot;, &quot;stop&quot;); LocalBroadcastManager.getInstance(this).sendBroadcast(intent); Log.d(&quot;stopVPN&quot;); &#125;&#125; 然后在AndroidManifest.xml里面添加服务，代码如下： 12345678910&lt;service android:name=&quot;.utils.QuickTileService&quot; android:label=&quot;@string/app_name&quot; android:icon=&quot;@drawable/ic_netease_cloud_music&quot; android:permission=&quot;android.permission.BIND_QUICK_SETTINGS_TILE&quot;&gt; &lt;intent-filter&gt; &lt;action android:name=&quot;android.service.quicksettings.action.QS_TILE&quot;/&gt; &lt;/intent-filter&gt; &lt;meta-data android:name=&quot;android.service.quicksettings.ACTIVE_TILE&quot; android:value=&quot;true&quot;/&gt;&lt;/service&gt; 编译运行看一下效果：效果还不错，然后就可以正式打包成APK文件了。 结尾写这篇文章加上写代码总共花了大半天时间吧，更改后的代码我会放在GitHub，并且尝试合并到原作者的项目。 下载地址：点这里安装不上的请先卸载旧版本已知Bug：部分情况下网易云会无法播放歌曲，清除缓存即可还是用原版吧。 都看到这里了，还不去酷安给个三连支持一下？","categories":[],"tags":[{"name":"编程","slug":"编程","permalink":"https://blog.revincx.icu/tags/%E7%BC%96%E7%A8%8B/"},{"name":"安卓","slug":"安卓","permalink":"https://blog.revincx.icu/tags/%E5%AE%89%E5%8D%93/"}]},{"title":"Hello World","slug":"hello-world","date":"2020-09-15T04:52:48.000Z","updated":"2020-11-20T14:02:28.458Z","comments":true,"path":"posts/hello-world/","link":"","permalink":"https://blog.revincx.icu/posts/hello-world/","excerpt":"","text":"Q：这是什么东西？A：这是Hexo自动生成的测试文章，无视即可。 Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new &quot;My New Post&quot; More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","categories":[],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"https://blog.revincx.icu/tags/Hexo/"}]}],"categories":[],"tags":[{"name":"教程","slug":"教程","permalink":"https://blog.revincx.icu/tags/%E6%95%99%E7%A8%8B/"},{"name":"编程","slug":"编程","permalink":"https://blog.revincx.icu/tags/%E7%BC%96%E7%A8%8B/"},{"name":"网络安全","slug":"网络安全","permalink":"https://blog.revincx.icu/tags/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/"},{"name":"网页设计","slug":"网页设计","permalink":"https://blog.revincx.icu/tags/%E7%BD%91%E9%A1%B5%E8%AE%BE%E8%AE%A1/"},{"name":"Hexo","slug":"Hexo","permalink":"https://blog.revincx.icu/tags/Hexo/"},{"name":"安卓","slug":"安卓","permalink":"https://blog.revincx.icu/tags/%E5%AE%89%E5%8D%93/"}]}